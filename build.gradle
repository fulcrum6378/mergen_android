plugins { id 'com.android.application' version '8.1.0' apply false }

/** Calculates the number of Git commits in a project directory */
int gitCount(String dir) {
    return providers.exec {
        workingDir dir
        commandLine 'git', 'rev-list', 'HEAD'
        args '--count'
    }.standardOutput.asText.get().toInteger()
}

ext {
    VERSION = '0.4.0.' +
            String.format("%04d", gitCount(rootDir.toString()) + gitCount('D:\\Programming\\MyCV'))
}

tasks.register('clean', Delete) {
    delete rootProject.buildDir
    delete "${rootDir}/android/.cxx/"
    delete "${rootDir}/android/build/"
}
